let User,Service,Disponibilite;_e24‍.x([["findByCity",()=>findByCity],["findByAvailable",()=>findByAvailable],["findByService",()=>findByService]]);_e24‍.w("../models/user-model",[["default",["User"],function(v){User=v}]]);_e24‍.w("../models/service-model",[["default",["Service"],function(v){Service=v}]]);_e24‍.w("../models/disponibilite-model",[["default",["Disponibilite"],function(v){Disponibilite=v}]]);




       const findByCity = async (req, res) => {
    try {
        const user = await User.find({
            $and: [{
                ville: {
                    $regex: new RegExp(req.body.city, "i")
                },
                profile: {
                    $regex: new RegExp("professional", "i")
                }
            }],
        });
        return res.json(user);
    } catch (error) {
        return res.status(500).json({
            status: 500,
            message: "Aucun resultat"
        });
    }
};

       const findByAvailable = async (req, res) => {
    try {
        const user = await Disponibilite.find({
            $or: [{
                start: req.body.start
            }]
        });
        return res.json(user);
    } catch (error) {
        return res.status(500).json({
            status: 500,
            message: "Aucun resultat"
        });
    }
};

       const findByService = async (req, res) => {
    try {
        const service = await Service.find({
            $or: [{
                libelle: req.body.libelle
            }]
        }).sort({ createdAt: "desc" }).populate([{
            path: "user",
            populate: {
                path: "user",
                model: "User",
            },
        }]);
        return res.json({
            success: true,
            result: service
        });
    } catch (error) {
        return res.status(500).json({
            status: 500,
            message: "Aucun resultat"
        });
    }
};

